// === public/index.html ===
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MWERT-XR AR Demo</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/socket.io@4.6.0/dist/socket.io.min.js"></script>
    <script src="game.client.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <a-scene
      xrweb="" 
      embedded 
      arjs="sourceType: webcam; debugUIEnabled: false;">

      <a-assets>
        <a-asset-item id="whaleModel" src="assets/whale.gltf"></a-asset-item>
      </a-assets>

      <a-entity gltf-model="#whaleModel" position="0 0 -2" id="whale"></a-entity>
      <a-camera position="0 1.6 0"></a-camera>

    </a-scene>
  </body>
</html>


// === public/game.client.js ===
const socket = io();

const urlParams = new URLSearchParams(window.location.search);
const roomId = urlParams.get('id') || 'default';
socket.emit('join_room', roomId);

const whale = document.getElementById('whale');

whale.addEventListener('click', () => {
  socket.emit('object_selected', { roomId, objectId: 'whale' });
});

socket.on('object_selected', ({ objectId }) => {
  const obj = document.getElementById(objectId);
  if (obj) obj.setAttribute('animation', 'property: scale; to: 1.5 1.5 1.5; dur: 500; dir: alternate; loop: 2');
});

